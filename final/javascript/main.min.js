function setRankings(){$(".rateYo").each(function(){let e=parseFloat($(this).attr("data-rating"));e=e/10*5,$(this).rateYo({rating:e,starWidth:"17px",readOnly:!0,multiColor:{startColor:"#FF0000",endColor:"#f1c40f"}})})}function roundTo(e,n){void 0===n&&(n=0);let i=Math.pow(10,n);return e=parseFloat((e*i).toFixed(11)),+(Math.round(e)/i).toFixed(2)}BASE_URL="/~lbaw1662/final/";let userId=null,token=null,adminId=null;$(document).ready(function(){function e(){let e,n=$("#signInForm"),i=n.find("#usrname").val(),o=n.find("#psw").val();(e=$.ajax({type:"POST",url:BASE_URL+"api/authentication/signin.php",data:{username:i,password:o},dataType:"json"})).done(function(e,n,i){let o=e.message;e.response.includes("Success")?window.location.href=window.location.href:$("#loginModal").find(".field_error").text(o)}),e.fail(function(e,n,i){console.error("The following error occurred: "+n,i)})}function n(){$.magnificPopup.close();let e=$("#feedbackForm"),n=e.find("textarea#feedback").val(),i=$.ajax({type:"POST",url:BASE_URL+"api/user/feedback.php",data:{feedback:n,userId:userId,token:token},dataType:"json"});i.done(function(n,i,o){let a=n.message,t=n.response;$.magnificPopup.open({items:{src:'<div class="white-popup">'+a+"</div>",type:"inline",mainClass:"mfp-fade"}}),t.includes("Success")&&e.trigger("reset")}),i.fail(function(e,n,i){console.error("The following error occurred: "+n,i)})}function i(e){$(".dropdown .badge").html(e)}function o(e){let n=$(e).find("#user_name").val(),i=$(e).find("#user_email").val(),o=$(e).find("#user_message").val(),a=$.ajax({type:"POST",url:BASE_URL+"api/user/contact_us.php",data:{contactEmail:i,message:o,contactName:n},dataType:"json"});a.done(function(n,i,o){let a=n.response,t=n.message;a.includes("Success 200")?($("#contact-us-modal").modal("hide"),$(e).trigger("reset"),$.magnificPopup.open({items:{src:'<div class="white-popup">'+t+"</div>",type:"inline",mainClass:"mfp-fade"}})):$(e).find(".field_error").text(t)}),a.fail(function(e,n,i){console.error("The following error occurred: "+n,i)})}token=$("input[name=token]").val(),userId=$("input[name=user_id]").val(),adminId=$("input[name=admin_id]").val(),$("body").tooltip({selector:"[data-toggle=tooltip]"}),$("body").popover({selector:"[data-toggle=popover]"}),$("#signInForm").validate({rules:{username:{required:!0,maxlength:32},password:{required:!0,minlength:8,maxlength:32}},messages:{username:{required:"Please, enter your username.",maxlength:"Your username must be no more than 32 characters."},password:{required:"Please, enter your password.",minlength:"Your password should be between 8 and 32 characters.",maxlength:"Your password should be between 8 and 32 characters."}},errorPlacement:function(e,n){e.insertAfter(n)},submitHandler:e}),$(".leaveFeedbackPopup").on("click",function(){$(".leaveFeedbackPopup").magnificPopup({type:"inline",midClick:!0,mainClass:"mfp-fade"}).magnificPopup("open")}),$("#feedbackForm").validate({rules:{feedback:{required:!0,maxlength:256}},submitHandler:n}),$(".notifications-wrapper .hideNotification").click(function(e){let n=$(".dropdown-menu.notifications .notifications-wrapper"),o=n.children().length,a=$(this).closest(".notifications-wrapper");a.fadeOut(500,function(){a.remove(),1!==o&&i(o-1)}),1===(o=n.children().length)?($('<p class="notifications-empty">You have no new notifications</p>').insertAfter(".notifications hr.divider:first"),i(0)):e.stopPropagation()}),$("#navbar-collapse-1").on("click",".notification-footer h4.markRecentNotificationsAsRead",function(){let e=$(".notifications"),n=e.children(".notifications-wrapper").length,o=[];if(e.children(".notifications-wrapper").each(function(){let e=$(this).find(".notification-media").attr("class").split("id-");if(2===e.length){let n=e[1];o.push(n)}this.remove()}),n>0){let e=$.ajax({type:"POST",url:BASE_URL+"api/user/read_notifications.php",data:{notifications:o,token:token,userId:userId},dataType:"json"});e.done(function(e,n,o){let a=e.message;if(e.response.includes("Success")){let n=e.nrNotifications;$(".dropdown-menu.notifications").empty(),$(".dropdown-menu.notifications").append(e.notificationsDiv),i(n)}else $.magnificPopup.open({items:{src:'<div class="white-popup">'+a+"</div>",type:"inline",mainClass:"mfp-fade"}})})}else i(0)}),$(window).width()<=425&&$("#categories-wrapper").removeClass("in"),setRankings(),$("#sendContactEmailForm").validate({errorElement:"div",rules:{user_name:{required:!0,maxlength:32},user_email:{required:!0,email:!0},user_message:{required:!0,maxlength:1024}},errorPlacement:function(e,n){e.insertAfter(n)},submitHandler:o})}),window.fbAsyncInit=function(){FB.init({appId:"278916729224728",xfbml:!0,version:"v2.9"}),FB.AppEvents.logPageView()},function(e,n,i){let o,a=e.getElementsByTagName(n)[0];e.getElementById(i)||((o=e.createElement(n)).id=i,o.src="//connect.facebook.net/en_US/sdk.js",a.parentNode.insertBefore(o,a))}(document,"script","facebook-jssdk");