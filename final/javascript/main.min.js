function setRankings(){$(".rateYo").each(function(){let e=parseFloat($(this).attr("data-rating"));e=e/10*5,$(this).rateYo({rating:e,starWidth:"17px",readOnly:!0,multiColor:{startColor:"#FF0000",endColor:"#f1c40f"}})})}function roundTo(e,n){void 0===n&&(n=0);let i=Math.pow(10,n);return e=parseFloat((e*i).toFixed(11)),+(Math.round(e)/i).toFixed(2)}BASE_URL="/";let userId=null,token=null,adminId=null;$(document).ready(function(){function e(){let e,n=$("#signInForm"),i=n.find("#usrname").val(),t=n.find("#psw").val();(e=$.ajax({type:"POST",url:BASE_URL+"api/authentication/signin.php",data:{username:i,password:t},dataType:"text"})).done(function(e,n,i){e.includes("Success")?window.location.href=window.location.href:$("#loginModal").find(".field_error").text(e)}),e.fail(function(e,n,i){console.error("The following error occurred: "+n,i)})}function n(){$.magnificPopup.close();let e=$("#feedbackForm"),n=e.find("textarea#feedback").val(),i=$.ajax({type:"POST",url:BASE_URL+"api/user/feedback.php",data:{feedback:n,userId:userId,token:token},dataType:"text"});i.done(function(n,i,t){$.magnificPopup.open({items:{src:'<div class="white-popup">'+n+"</div>",type:"inline"}}),e.trigger("reset")}),i.fail(function(e,n,i){console.error("The following error occurred: "+n,i)})}function i(e){$(".dropdown .badge").html(e)}token=$("input[name=token]").val(),userId=$("input[name=user_id]").val(),adminId=$("input[name=admin_id]").val(),$("body").tooltip({selector:"[data-toggle=tooltip]"}),$("#signInForm").validate({rules:{username:{required:!0,maxlength:32},password:{required:!0,minlength:8,maxlength:32}},messages:{username:{required:"Please, enter your username.",maxlength:"Your username must be no more than 32 characters."},password:{required:"Please, enter your password.",minlength:"Your password should be between 8 and 32 characters.",maxlength:"Your password should be between 8 and 32 characters."}},errorPlacement:function(e,n){e.insertAfter(n)},submitHandler:e}),$(".leaveFeedbackPopup").on("click",function(){$(".leaveFeedbackPopup").magnificPopup({type:"inline",midClick:!0,mainClass:"mfp-fade"}).magnificPopup("open")}),$("#feedbackForm").validate({rules:{feedback:{required:!0,maxlength:256}},submitHandler:n}),$(".notifications-wrapper .hideNotification").click(function(e){let n=$(".dropdown-menu.notifications .notifications-wrapper"),t=n.children().length,o=$(this).closest(".notifications-wrapper");o.fadeOut(500,function(){o.remove(),1!==t&&i(t-1)}),t=n.children().length,console.log(t),1===t?($('<p class="notifications-empty">You have no new notifications</p>').insertAfter(".notifications hr.divider:first"),i(0)):e.stopPropagation()}),$("#navbar-collapse-1").on("click",".notification-footer h4.markRecentNotificationsAsRead",function(){let e=$(".notifications"),n=e.children(".notifications-wrapper").length,t=[];if(e.children(".notifications-wrapper").each(function(){let e=$(this).find(".notification-media").attr("class").split("id-");if(2===e.length){let n=e[1];t.push(n)}this.remove()}),n>0){let e=$.ajax({type:"POST",url:BASE_URL+"api/user/read_notifications.php",data:{notifications:t,token:token,userId:userId},dataType:"json"});e.done(function(e,n,t){let o=e.message;if($.magnificPopup.open({items:{src:'<div class="white-popup">'+o+"</div>",type:"inline"}}),o.includes("Success")){let n=e.nrNotifications;$(".dropdown-menu.notifications").empty(),$(".dropdown-menu.notifications").append(e.notificationsDiv),i(n)}})}else i(0)}),$(window).width()<=425&&$("#categories-wrapper").removeClass("in"),setRankings()}),window.fbAsyncInit=function(){FB.init({appId:"278916729224728",xfbml:!0,version:"v2.9"}),FB.AppEvents.logPageView()},function(e,n,i){let t,o=e.getElementsByTagName(n)[0];e.getElementById(i)||((t=e.createElement(n)).id=i,t.src="//connect.facebook.net/en_US/sdk.js",o.parentNode.insertBefore(t,o))}(document,"script","facebook-jssdk");