$(document).ready(function(){let e;$("input[type=radio][name=optradio]").change(function(){"api"===this.value?$("#amazonSearch").fadeIn("slow"):"personalized"===this.value&&($("#amazonSearch").fadeOut("slow"),e=null)}),$("#amazonSearch").on("change","#keyword",function(){$(this).css("border","")}),$("#amazonSearch").on("click",".searchAmazon",function(e){e.stopPropagation();let t=$("#keyword").val();if(""==t)return void $("#keyword").css("border","1px solid red");let a=$("#search_index").val();$.ajax({type:"GET",url:BASE_URL+"api/auction/amazon.php",dataType:"json",data:{keyword:t,category:a},success:function(e){if(e.message.includes("Success")){let t=$("#amazonSearch");t.empty(),t.append(e.amazonDiv),t.show()}},error:function(e){console.log(e)}})}),$("#step-1").on("click",".input-group span.addCharacteristic",function(){let e=$(this).closest(".input-group").find("input[name=newCharacteristic]"),t=e.val();if(!(""===t||t.length>128)){let a=$("#characteristics");if(!(a.find("> option").length>=20)){let i="<option>"+t+"</option>";a.append(i),a.selectpicker("refresh"),e.val("")}}}),$(function(){$("#startDatePicker").datetimepicker({minDate:moment(),locale:"pt"}),$("#endDatePicker").datetimepicker({minDate:moment(),locale:"pt"})}),$.validator.addMethod("productCategoriesSelected",function(e,t,a){return e.length>0&&e.length<3},"At least one category must be selected."),$.validator.addMethod("auctionTypeSelected",function(e,t,a){return""!==e&&("Sealed Bid"===e||"Default"===e||"Dutch"===e)},"The auction type must be selected"),$("#createAuctionForm").validate({rules:{product_name:{required:!0,maxlength:64},quantity:{required:!0,digits:!0},description:{required:!0,maxlength:512},condition:{required:!0,maxlength:512},"category[]":{productCategoriesSelected:!0},base_price:{required:!0,digits:!0},start_date:{required:!0},end_date:{required:!0},auction_type:{auctionTypeSelected:!0}},messages:{product_name:{required:"Please, enter the product name.",maxlength:"The product name must be no more than 64 characters."},quantity:{required:"Please, enter the number of products that are up to sell.",digits:"Only digits are allowed."},base_price:{required:"Please, enter the auction initial price.",digits:"Only digits are allowed."},condition:{required:"Please, enter the product condition.",maxlength:"The product conditionmust be no more than 255 characters."},description:{required:"Please, enter the product description.",maxlength:"The product conditionmust be no more than 255 characters."},category:{productCategoriesSelected:"Please, select a category."},auction_type:{auctionTypeSelected:"Please, select the auction type."}},errorPlacement:function(e,t){if("description"===$(t).attr("name")||"condition"===$(t).attr("name"))e.insertAfter(t);else{let a=$(t).closest(".input-group");e.insertAfter(a)}}});let t=$("ul.setup-panel li a"),a=$(".setup-content");a.hide(),t.click(function(e){e.preventDefault();let i=$($(this).attr("href")),n=$(this).closest("li");n.hasClass("disabled")||(t.closest("li").removeClass("active"),n.addClass("active"),a.hide(),i.show())}),$("ul.setup-panel li.active a").trigger("click"),$("#activate-step-2").on("click",function(){$("#product_name").valid()&&$("#category").valid()&&$("#description").valid()&&$("#condition").valid()&&($("ul.setup-panel li:eq(1)").removeClass("disabled"),$('ul.setup-panel li a[href="#step-2"]').trigger("click"),$(this).remove())}),$("#activate-step-3").on("click",function(e){$("#end_date").valid()&&$("#start_date").valid()&&$("#auction_type").valid()&&$("#base_price").valid()&&($("#createAuction-btn").removeClass("hidden"),$("ul.setup-panel li:eq(2)").removeClass("disabled"),$('ul.setup-panel li a[href="#step-3"]').trigger("click"),$(this).remove())})});