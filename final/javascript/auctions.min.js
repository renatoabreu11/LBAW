function setChangeListType(){$("#listType").find(".btn").click(function(){if(!$(this).hasClass("active")){$(this).addClass("active"),$(this).siblings().removeClass("active");let t=$(this).data("target");$(t).addClass("in"),"#auctionsList"===t?$("#auctionsThumbnails").removeClass("in"):"#auctionsThumbnails"===t&&$("#auctionsList").removeClass("in")}})}function setCountdown(){$(".clock").each(function(){let t=$(this).find("p").text();$(this).countdown(t).on("update.countdown",function(t){let i="%Hh:%Mm:%Ss";t.offset.totalDays>0&&(i="%-d day%!d "+i),t.offset.weeks>0&&(i="%-w week%!w "+i),$(this).html(t.strftime(i))}).on("finish.countdown",function(t){$(this).html("This offer has expired!").parent().addClass("disabled")})})}function setSearchRequest(){$("#searchBtn").click(function(){let t=$("#inputSearch").val(),i=$("#category").find("option:selected").val(),a=$("#fromPrice").find("option:selected").val(),n=$("#toPrice").find("option:selected").val(),o=$("#fromTimeRem").find("option:selected").val(),s=$("#toTimeRem").find("option:selected").val();$.ajax({type:"GET",url:BASE_URL+"api/auctions/search_auctions.php",data:{name:t,category:i,fromPrice:a,toPrice:n,fromTimeRem:o,toTimeRem:s},dataType:"json",success:function(t){$("#auctions").empty(),$("#auctionsThumbnails").empty(),$("#auctions").append(t.list),$("#auctionsThumbnails").append(t.listThumbnail),setCountdown();let i=t.nr_pages;$("#pagination").attr("data-nr_pages",i),$("#pagination").twbsPagination("destroy"),setPagination(),setRankings(),setSorting(),$("#popular").trigger("click"),$("#list_btn").trigger("click")},error:function(t){alert(t)}})})}function setPagination(){let t=parseInt($("#pagination").attr("data-nr_pages"));0!=t&&$("#pagination").twbsPagination({totalPages:t,visiblePages:7,onPageClick:function(t,i){$("#pagination").attr("data-curr_page",i),showAuctionsOfAPage(i),window.scrollTo(0,0)}})}function setSorting(){$(".auctionSort li").click(function(){$(".auctionSort li").removeClass("active"),$(this).addClass("active");let t=this.id;showAllAuctions(),"priceLow"===t&&tinysort("#bodyToSort>tr",{attr:"data-priceLow"}),"priceHigh"===t&&tinysort("#bodyToSort>tr",{attr:"data-priceHigh"}),"popular"===t&&tinysort("#bodyToSort>tr",{attr:"data-popular"}),"newest"===t&&tinysort("#bodyToSort>tr",{attr:"data-newest"}),"ending"===t&&tinysort("#bodyToSort>tr",{attr:"data-ending"}),"priceLow"===t&&tinysort("#auctionsThumbnails>div",{attr:"data-priceLow"}),"priceHigh"===t&&tinysort("#auctionsThumbnails>div",{attr:"data-priceHigh"}),"popular"===t&&tinysort("#auctionsThumbnails>div",{attr:"data-popular"}),"newest"===t&&tinysort("#auctionsThumbnails>div",{attr:"data-newest"}),"ending"===t&&tinysort("#auctionsThumbnails>div",{attr:"data-ending"});let i=$("#pagination").attr("data-curr_page");setAuctionsCurrPage(),showAuctionsOfAPage(i)})}function showAllAuctions(){$(".auction_row").each(function(){$(this).show()})}function setAuctionsCurrPage(){let t=0;$("#auctions .auction_row").each(function(){let i=Math.floor(t/8)+1;$(this).attr("data-page",i),t++}),t=0,$("#auctionsThumbnails .auction_row").each(function(){let i=Math.floor(t/8)+1;$(this).attr("data-page",i),t++})}function showAuctionsOfAPage(t){$(".auction_row").each(function(){parseInt($(this).attr("data-page"))==t?$(this).show():$(this).hide()})}$(document).ready(function(){setChangeListType(),setCountdown(),setSearchRequest(),setPagination(),setRankings(),setSorting()});