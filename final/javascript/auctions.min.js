function setChangeListType(){$("#listType").find(".btn").click(function(){if(!$(this).hasClass("active")){$(this).addClass("active"),$(this).siblings().removeClass("active");let t=$(this).data("target");$(t).addClass("in"),"#auctionsList"===t?$("#auctionsThumbnails").removeClass("in"):"#auctionsThumbnails"===t&&$("#auctionsList").removeClass("in")}})}function setCountdown(){$(".clock").each(function(){let t=$(this).find("p").text();$(this).countdown(t).on("update.countdown",function(t){let a="%Hh:%Mm:%Ss";t.offset.totalDays>0&&(a="%-d day%!d "+a),t.offset.weeks>0&&(a="%-w week%!w "+a),$(this).html(t.strftime(a))}).on("finish.countdown",function(t){$(this).html("This offer has expired!").parent().addClass("disabled")})})}function setSearchRequest(){$("#searchBtn").click(function(){let t=$("#slider-range"),a=$("#inputSearch").val(),i=$("#category").find("option:selected").val(),n=t.slider("values",0),e=t.slider("values",1),o=$("#fromTimeRem").val(),s=$("#toTimeRem").val();$.ajax({type:"GET",url:BASE_URL+"api/auctions/search_auctions.php",data:{name:a,category:i,fromPrice:n,toPrice:e,fromTimeRem:o,toTimeRem:s},dataType:"json",success:function(t){let a=t.message;if(t.response.includes("Error"))return void $.magnificPopup.open({items:{src:'<div class="white-popup">'+a+"</div>",type:"inline",mainClass:"mfp-fade"}});$("#auctions").empty(),$("#auctionsThumbnails").empty(),$("#auctions").append(t.list),$("#auctionsThumbnails").append(t.listThumbnail),setCountdown();let i=t.nr_pages;$("#pagination").attr("data-nr_pages",i),$("#pagination").twbsPagination("destroy"),setPagination(),setRankings(),setSorting(),$("#popular").trigger("click"),$("#list_btn").trigger("click")},error:function(t){console.log(t)}})})}function setPagination(){let t=parseInt($("#pagination").attr("data-nr_pages"));0!=t&&$("#pagination").twbsPagination({totalPages:t,visiblePages:7,onPageClick:function(t,a){$("#pagination").attr("data-curr_page",a),showAuctionsOfAPage(a),window.scrollTo(0,0)}})}function setSorting(){$(".auctionSort li").click(function(){$(".auctionSort li").removeClass("active"),$(this).addClass("active");let t=this.id;showAllAuctions(),"priceLow"===t&&tinysort("#bodyToSort>tr",{attr:"data-priceLow"}),"priceHigh"===t&&tinysort("#bodyToSort>tr",{attr:"data-priceHigh"}),"popular"===t&&tinysort("#bodyToSort>tr",{attr:"data-popular"}),"newest"===t&&tinysort("#bodyToSort>tr",{attr:"data-newest"}),"ending"===t&&tinysort("#bodyToSort>tr",{attr:"data-ending"}),"priceLow"===t&&tinysort("#auctionsThumbnails>div",{attr:"data-priceLow"}),"priceHigh"===t&&tinysort("#auctionsThumbnails>div",{attr:"data-priceHigh"}),"popular"===t&&tinysort("#auctionsThumbnails>div",{attr:"data-popular"}),"newest"===t&&tinysort("#auctionsThumbnails>div",{attr:"data-newest"}),"ending"===t&&tinysort("#auctionsThumbnails>div",{attr:"data-ending"});let a=$("#pagination").attr("data-curr_page");setAuctionsCurrPage(),showAuctionsOfAPage(a)})}function showAllAuctions(){$(".auction_row").each(function(){$(this).show()})}function setAuctionsCurrPage(){let t=0;$("#auctions .auction_row").each(function(){let a=Math.floor(t/8)+1;$(this).attr("data-page",a),t++}),t=0,$("#auctionsThumbnails .auction_row").each(function(){let a=Math.floor(t/8)+1;$(this).attr("data-page",a),t++})}function showAuctionsOfAPage(t){$(".auction_row").each(function(){parseInt($(this).attr("data-page"))==t?$(this).show():$(this).hide()})}$(document).ready(function(){let t=$("#slider-range");t.slider({range:!0,values:[1,1e3],min:1,max:1e3,slide:function(t,a){$("#amount").val(a.values[0]+"€ - "+a.values[1]+"€")}}),$("#amount").val(t.slider("values",0)+"€ - "+t.slider("values",1)+"€"),$(function(){$("#fromDatePicker").datetimepicker({minDate:moment(),defaultDate:moment(),locale:"pt"}),$("#toDatePicker").datetimepicker({minDate:moment(),defaultDate:moment().add(1,"week"),locale:"pt",useCurrent:!1}),$("#fromDatePicker").on("dp.change",function(t){$("#toDatePicker").data("DateTimePicker").minDate(t.date)}),$("#toDatePicker").on("dp.change",function(t){$("#fromDatePicker").data("DateTimePicker").maxDate(t.date)})}),setChangeListType(),setCountdown(),setSearchRequest(),setPagination(),setRankings(),setSorting()});