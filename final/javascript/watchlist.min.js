function setCountdown(){$(".clock").each(function(){let t=$(this).find("p").text();$(this).countdown(t).on("update.countdown",function(t){let i="%Hh:%Mm:%Ss";t.offset.totalDays>0&&(i="%-d day%!d "+i),t.offset.weeks>0&&(i="%-w week%!w "+i),$(this).html(t.strftime(i))}).on("finish.countdown",function(t){$(this).html("Offer expired!").parent().addClass("disabled")})})}function setPagination(){let t=parseInt($("#pagination").attr("data-nr_pages"));0!=t&&$("#pagination").twbsPagination({totalPages:t,visiblePages:7,onPageClick:function(t,i){$("#pagination").attr("data-curr_page",i),showAuctionsOfAPage(i)}})}function showAuctionsOfAPage(t){$(".auction_row").each(function(){parseInt($(this).attr("data-page"))==t?$(this).show():$(this).hide()})}function showAllAuctions(){$(".auction_row").each(function(){$(this).show()})}function hideAllAuctions(){$(".auction_row").each(function(){$(this).hide()})}function setSorting(){$(".auctionSort li").click(function(){$(".auctionSort li").removeClass("active"),$(this).addClass("active");let t=this.id;showAllAuctions(),"priceLow"===t&&tinysort("#auctionsThumbnails>div",{attr:"data-priceLow"}),"priceHigh"===t&&tinysort("#auctionsThumbnails>div",{attr:"data-priceHigh"}),"popular"===t&&tinysort("#auctionsThumbnails>div",{attr:"data-popular"}),"newest"===t&&tinysort("#auctionsThumbnails>div",{attr:"data-newest"}),"ending"===t&&tinysort("#auctionsThumbnails>div",{attr:"data-ending"}),"recentlyAdded"===t&&tinysort("#auctionsThumbnails>div",{attr:"data-recentlyAdded"});$("#pagination").attr("data-curr_page",1),setPagesOfAuctions(),$("#pagination").twbsPagination("destroy"),setPagination(),showAuctionsOfAPage(1)})}function setPagesOfAuctions(){let t=0;$("#auctionsThumbnails .auction_row").each(function(){let i=Math.floor(t/4)+1;$(this).attr("data-page",i),t++})}function setFilter(){$(".selectpicker").on("change",function(){let t=$(this).find("option:selected").val();$("#pagination").attr("data-nr_pages",0),hideAllAuctions(),showAuctionsSpecifiedInFilter(t);let i=getNumPagesNecessaryToVisibleAuctions();$("#pagination").attr("data-nr_pages",i),setPagesOfVisibleAuctions();$("#pagination").attr("data-curr_page",1),$("#pagination").twbsPagination("destroy"),setPagination()})}function showAuctionsSpecifiedInFilter(t){"All auctions"==t?showAllAuctions():"My auctions"==t?$("#auctionsThumbnails .auction_row").each(function(){1==$(this).attr("data-myAuction")&&$(this).show()}):"Closed auctions"==t?$("#auctionsThumbnails .auction_row").each(function(){0==$(this).attr("data-active")&&$(this).show()}):"Open auctions"==t&&$("#auctionsThumbnails .auction_row").each(function(){1==$(this).attr("data-active")&&$(this).show()})}function getNumPagesNecessaryToVisibleAuctions(){let t=0;return $("#auctionsThumbnails .auction_row").each(function(){$(this).is(":visible")&&t++}),Math.ceil(t/4)}function setPagesOfVisibleAuctions(){let t=0;$("#auctionsThumbnails .auction_row").each(function(){if($(this).is(":visible")){let i=Math.floor(t/4)+1;$(this).attr("data-page",i),t++}else $(this).attr("data-page",-1)})}function setRemoveAuctionFromWatchlist(){$(".rm-auction").click(function(){let t=$(this).closest("ul").attr("data-auctionId"),i=$(this);$.ajax({type:"POST",url:BASE_URL+"api/auctions/delete_auction_watchlist.php",data:{token:token,userId:userId,auctionId:t},success:function(t){if($.magnificPopup.open({items:{src:'<div class="white-popup">'+t+"</div>",type:"inline"}}),t.includes("Success")){i.closest(".auction_row").remove();let t=getNumPagesNecessaryToAllAuctions();$("#pagination").attr("data-nr_pages",t),$("#pagination").attr("data-curr_page",1),setPagesOfAuctions(),$("#pagination").twbsPagination("destroy"),setPagination(),showAuctionsOfAPage(1),setSorting(),setFilter()}},error:function(t){alert(t)}})})}function getNumPagesNecessaryToAllAuctions(){let t=0;return $("#auctionsThumbnails .auction_row").each(function(){t++}),Math.ceil(t/4)}function setToogleNotifications(){$(".toogle-notif").click(function(){let t=$(this).closest("ul").attr("data-auctionId"),i=$(this).closest("li"),a=$(this).closest("ul");$.ajax({type:"POST",url:BASE_URL+"api/auctions/toogle_notifications.php",data:{token:token,userId:userId,auctionId:t},success:function(t){$.magnificPopup.open({items:{src:'<div class="white-popup">'+t+"</div>",type:"inline"}}),i.addClass("disabled"),i.children("a").removeClass("toogle-notif"),i.hasClass("disable-notif")?(a.children(".enable-notif").addClass("toogle-notif"),a.children(".enable-notif").removeClass("disabled")):(a.children(".disable-notif").addClass("toogle-notif"),a.children(".disable-notif").removeClass("disabled")),setToogleNotifications()},error:function(t){alert(t)}})})}$(document).ready(function(){setCountdown(),setPagination(),setRankings(),setSorting(),setFilter(),setRemoveAuctionFromWatchlist(),setToogleNotifications()});